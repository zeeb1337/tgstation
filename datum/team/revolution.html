<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/team/revolution - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/team/revolution.html#var">Var Details</a> - <a href="datum/team/revolution.html#proc">Proc Details</a></header><main><h1>revolution <aside>/<a href="datum.html">datum</a>/<a href="datum/team.html">team</a>/<a href="datum/team/revolution.html">revolution</a></aside> <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L383"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 383"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/team/revolution.html#var/ex_headrevs">ex_headrevs</a></th><td>List of all ex-headrevs. Useful because dynamic removes antag status when it ends, so this can be kept for the roundend report.</td></tr><tr><th><a href="datum/team/revolution.html#var/ex_revs">ex_revs</a></th><td>List of all ex-revs. Useful because dynamic removes antag status when it ends, so this can be kept for the roundend report.</td></tr><tr><th><a href="datum/team/revolution.html#var/heads_objective">heads_objective</a></th><td>The objective of the heads of staff, aka to kill the headrevs.</td></tr><tr><th><a href="datum/team/revolution.html#var/max_headrevs">max_headrevs</a></th><td>Maximum number of headrevs</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/team/revolution.html#proc/check_heads_victory">check_heads_victory</a></th><td>Checks if heads have won</td></tr><tr><th><a href="datum/team/revolution.html#proc/check_rev_victory">check_rev_victory</a></th><td>Checks if revs have won</td></tr><tr><th><a href="datum/team/revolution.html#proc/defeat_effects">defeat_effects</a></th><td>Handles effects of revs losing, such as making ex-headrevs unrevivable and setting up head of staff memories.</td></tr><tr><th><a href="datum/team/revolution.html#proc/get_head_revolutionaries">get_head_revolutionaries</a></th><td>Returns a list of all headrevs.</td></tr><tr><th><a href="datum/team/revolution.html#proc/process_victory">process_victory</a></th><td>Updates the state of the world depending on if revs won or loss.
Returns who won, at which case this method should no longer be called.</td></tr><tr><th><a href="datum/team/revolution.html#proc/round_result">round_result</a></th><td>Mutates the ticker to report that the revs have won</td></tr><tr><th><a href="datum/team/revolution.html#proc/save_members">save_members</a></th><td>Saves a list of all ex-headrevs and a list of all revs.</td></tr><tr><th><a href="datum/team/revolution.html#proc/update_objectives">update_objectives</a></th><td>Proc called on periodic timer.
Updates the rev team's objectives to make sure all heads are targets, useful when new heads latejoin.
Propagates all objectives to all revs.</td></tr><tr><th><a href="datum/team/revolution.html#proc/update_rev_heads">update_rev_heads</a></th><td>Proc called on periodic timer.
Tries to make sure an appropriate number of headrevs are part of the revolution.
Will promote up revs to headrevs as necessary based on the hard max_headrevs cap and the soft cap based on the number of heads of staff and sec.</td></tr><tr><th><a href="datum/team/revolution.html#proc/victory_effects">victory_effects</a></th><td>Handles any pre-round-ending effects on rev victory. An example use case is recording memories.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/ex_headrevs"><aside class="declaration">var </aside>ex_headrevs <aside>– /list</aside> <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L390"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 390"></a></h3><p>List of all ex-headrevs. Useful because dynamic removes antag status when it ends, so this can be kept for the roundend report.</p><h3 id="var/ex_revs"><aside class="declaration">var </aside>ex_revs <aside>– /list</aside> <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L393"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 393"></a></h3><p>List of all ex-revs. Useful because dynamic removes antag status when it ends, so this can be kept for the roundend report.</p><h3 id="var/heads_objective"><aside class="declaration">var </aside>heads_objective <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/objective.html">objective</a>/<a href="datum/objective/mutiny.html">mutiny</a></aside> <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L396"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 396"></a></h3><p>The objective of the heads of staff, aka to kill the headrevs.</p><h3 id="var/max_headrevs"><aside class="declaration">var </aside>max_headrevs <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L387"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 387"></a></h3><p>Maximum number of headrevs</p><h2 id="proc">Proc Details</h2><h3 id="proc/check_heads_victory"><aside class="declaration">proc </aside>check_heads_victory<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L472"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 472"></a></aside></h3><p>Checks if heads have won</p><h3 id="proc/check_rev_victory"><aside class="declaration">proc </aside>check_rev_victory<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L465"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 465"></a></aside></h3><p>Checks if revs have won</p><h3 id="proc/defeat_effects"><aside class="declaration">proc </aside>defeat_effects<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L540"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 540"></a></aside></h3><p>Handles effects of revs losing, such as making ex-headrevs unrevivable and setting up head of staff memories.</p><h3 id="proc/get_head_revolutionaries"><aside class="declaration">proc </aside>get_head_revolutionaries<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L421"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 421"></a></aside></h3><p>Returns a list of all headrevs.</p><h3 id="proc/process_victory"><aside class="declaration">proc </aside>process_victory<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L504"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 504"></a></aside></h3><p>Updates the state of the world depending on if revs won or loss.
Returns who won, at which case this method should no longer be called.</p><h3 id="proc/round_result"><aside class="declaration">proc </aside>round_result<aside>(finished)  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L555"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 555"></a></aside></h3><p>Mutates the ticker to report that the revs have won</p><h3 id="proc/save_members"><aside class="declaration">proc </aside>save_members<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L460"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 460"></a></aside></h3><p>Saves a list of all ex-headrevs and a list of all revs.</p><h3 id="proc/update_objectives"><aside class="declaration">proc </aside>update_objectives<aside>(initial)  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L401"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 401"></a></aside></h3><p>Proc called on periodic timer.
Updates the rev team's objectives to make sure all heads are targets, useful when new heads latejoin.
Propagates all objectives to all revs.</p><h3 id="proc/update_rev_heads"><aside class="declaration">proc </aside>update_rev_heads<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L433"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 433"></a></aside></h3><p>Proc called on periodic timer.
Tries to make sure an appropriate number of headrevs are part of the revolution.
Will promote up revs to headrevs as necessary based on the hard max_headrevs cap and the soft cap based on the number of heads of staff and sec.</p><h3 id="proc/victory_effects"><aside class="declaration">proc </aside>victory_effects<aside>()  <a href="https://github.com/zeeb1337/tgstation/blob/8443f94e9c416cf51908d3f0af44fca39fe61e85/code/modules/antagonists/revolution/revolution.dm#L532"><img src="git.png" width="16" height="16" title="code/modules/antagonists/revolution/revolution.dm 532"></a></aside></h3><p>Handles any pre-round-ending effects on rev victory. An example use case is recording memories.</p></main><footer>tgstation.dme <a href="https://github.com/zeeb1337/tgstation/tree/8443f94e9c416cf51908d3f0af44fca39fe61e85">8443f94</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>